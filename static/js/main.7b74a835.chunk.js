(this["webpackJsonprewards-store"]=this["webpackJsonprewards-store"]||[]).push([[0],{26:function(e,t,c){},27:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},32:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(19),a=c.n(n),i=c(9),r=c(2),o=(c(26),c(27),c(4)),l=c(5),j=Object(s.createContext)({availableCoins:0,setAvailableCoins:function(){}}),u=c(0);var b=function(e){var t=e.children,c=Object(s.useState)({availableCoins:0}),n=Object(l.a)(c,2),a=n[0],i=n[1];return Object(u.jsx)(j.Provider,{value:{state:a,setAvailableCoins:function(e){i((function(t){return Object(o.a)(Object(o.a)({},t),{},{availableCoins:e})}))}},children:t})},d=(c(29),c(30),c.p+"static/media/aerolab-logo.0a8fb170.svg"),O=c.p+"static/media/coin.b8bc711d.svg",h=c(15),m=c.n(h),x=c(20),f={isDetected:!1,error:null},v={ok:!1,res:null};var g=function(){var e=Object(s.useState)(f),t=Object(l.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(v),i=Object(l.a)(a,2),r=i[0],o=i[1],j=Object(s.useState)(!1),u=Object(l.a)(j,2),b=u[0],d=u[1];return{success:r,error:c,loading:b,fetchService:function(){var e=Object(x.a)(m.a.mark((function e(t,c,s){var a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(v),n(f),d(!0),e.prev=3,e.next=6,fetch(t.endpoint,t.initObj);case 6:return a=e.sent,e.next=9,a.json();case 9:if(i=e.sent,a.ok){e.next=12;break}throw new Error(i.message||a.statusText||"Connection error");case 12:o({ok:!0,res:i}),n(f),"function"===typeof c&&c(i),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0),o(v),n({isDetected:!0,error:e.t0.message}),"function"===typeof s&&s(e.t0);case 23:return e.prev=23,d(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,17,23,26]])})));return function(t,c,s){return e.apply(this,arguments)}}()}},p="https://coding-challenge-api.aerolab.co/",N={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTIyNTc4YjNiYTYyNzAwMjE3YTMyYTciLCJpYXQiOjE2Mjk2NDA1ODd9.4ASFGTRdXNBgTQ9Nfhn3xlypgkGUWiVB5tWF5u9uiNI")}};function y(e,t){this.endpoint=e,this.initObj=t}c(32);var C=function(e){var t=e.customClass,c=void 0===t?"":t;return Object(u.jsx)("div",{className:"lds-dual-ring ".concat(c)})};var w=function(){var e=g(),t=e.success,c=e.error,n=e.loading,a=e.fetchService,r=Object(s.useContext)(j),b=r.state.availableCoins,h=r.setAvailableCoins,m=Object(s.useState)(0),x=Object(l.a)(m,2),f=x[0],v=x[1];return Object(s.useEffect)((function(){a(new y("".concat(p,"user/me"),Object(o.a)({},N)),(function(e){h(e.points||0)}))}),[]),Object(s.useEffect)((function(){v(1)}),[b]),Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)(i.b,{to:"/",className:"link-logo",children:Object(u.jsx)("img",{src:d,alt:"company logo"})}),Object(u.jsxs)("div",{className:"right-section",children:[t.ok&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(i.b,{to:"/history",className:"name",children:t.res.name||"..."}),Object(u.jsxs)(i.b,{to:"/getPoints",className:"score",children:[Object(u.jsx)("span",{className:"coins-number",onAnimationEnd:function(){return v(0)},fallen:f,children:b}),Object(u.jsx)("img",{src:O,alt:"coin"})]})]}),n&&Object(u.jsx)(C,{}),c.isDetected&&Object(u.jsx)("i",{children:"Not found data."})]})]})};c(38);var k=function(){var e=Object(r.f)().pathname;return Object(s.useMemo)((function(){return Object(u.jsx)("div",{className:"page-title",children:Object(u.jsx)("h1",{className:"title",children:(t=e,"/"===t?"Electronics":t.includes("getPoints")?"Get Points":t.includes("history")?"Your history":"Electronics")})});var t}),[e])};var S=function(e){var t=e.children;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{}),Object(u.jsx)(k,{}),Object(u.jsx)("main",{className:"container",children:t})]})},P=(c(39),c.p+"static/media/buy-blue.c5c4f01c.svg"),E=c.p+"static/media/buy-white.9b6e6567.svg",A=c(12),I=(c(40),{lowest:function(e){return e.slice().sort((function(e,t){return e.cost===t.cost?0:e.cost>t.cost?1:-1}))},highest:function(e){return e.slice().sort((function(e,t){return e.cost===t.cost?0:e.cost<t.cost?1:-1}))},byCategory:function(e){return e.slice().sort((function(e,t){return e.category.localeCompare(t.category)}))}}),T={lowest:!1,highest:!1,byCategory:!1};var D=function(e){var t=e.setProducts,c=void 0===t?function(){}:t,n=e.originProducts,a=void 0===n?[]:n,i=Object(s.useState)(T),r=Object(l.a)(i,2),j=r[0],b=r[1],d=function(e){var t=e.target;b((function(e){return Object(o.a)(Object(o.a)({},T),{},Object(A.a)({},t.id,!e[t.id]))}))};return Object(s.useEffect)((function(){var e=Object.keys(j).find((function(e){return!0===j[e]}));c(e?I[e]:a)}),[j]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:"subtitle",children:"Sort by:"}),Object(u.jsx)("button",{id:"byCategory",onClick:d,disabled:a.length<1,className:"sort-button".concat(j.byCategory?" selected-button":""),children:"Category"}),Object(u.jsx)("button",{id:"lowest",onClick:d,disabled:a.length<1,className:"sort-button".concat(j.lowest?" selected-button":""),children:"Lowest price"}),Object(u.jsx)("button",{id:"highest",onClick:d,disabled:a.length<1,className:"sort-button".concat(j.highest?" selected-button":""),children:"Highest price"})]})};c(41);var J=function(e){var t=e.current,c=void 0===t?0:t,s=e.total,n=void 0===s?0:s;return Object(u.jsxs)("span",{className:"page",children:[c," of ",n," products"]})};c(42);var F=function(e){var t=e.from,c=e.to,s=e.setPage,n=e.totalLength;return Object(u.jsxs)("div",{children:[t>0&&Object(u.jsx)("button",{onClick:function(){return s((function(e){return e-1}))},className:"sort-button pagination-button",children:"<"}),c<n-1&&Object(u.jsx)("button",{onClick:function(){return s((function(e){return e+1}))},className:"sort-button pagination-button",children:">"})]})};c(43);var Y=function(e){var t=e.show,c=void 0!==t&&t,s=e.type,n=void 0===s?"success":s,a=e.message,i=void 0===a?"successful message example 5px 2px 2px #999999; 5px 2px 2px #999999; 5px 2px 2px #999999;":a,r=e.okCallback,o=void 0===r?function(){}:r;return c?Object(u.jsx)("div",{className:"bg-modal",children:Object(u.jsxs)("div",{className:"modal",type:n,children:[Object(u.jsx)("span",{className:"emoji",children:"success"===n?"\ud83e\udd29":"\ud83d\ude15"}),Object(u.jsx)("h3",{className:"title",children:"success"===n?"Success!":"Error"}),Object(u.jsx)("span",{children:i}),Object(u.jsx)("button",{type:n,className:"ok-button",onClick:o,children:"Got it!"})]})}):null},L="...",M={show:!1,type:"success",message:""};var G=function(){var e=g(),t=e.success,c=e.error,n=e.loading,a=e.fetchService,i=g(),r=i.loading,b=i.fetchService,d=Object(s.useContext)(j),h=d.setAvailableCoins,m=d.state.availableCoins,x=Object(s.useState)([]),f=Object(l.a)(x,2),v=f[0],w=f[1],k=Object(s.useState)(0),S=Object(l.a)(k,2),A=S[0],I=S[1],T=Object(s.useState)(M),G=Object(l.a)(T,2),B=G[0],U=G[1],z=t.res||[],Q={from:A<=0?0:16*A,to:16*(A+1)};Object(s.useEffect)((function(){a(new y("".concat(p,"products"),Object(o.a)({},N)),(function(e){w(e)}))}),[]);var R=function(e,t){return function(){b(function(e){var t={body:JSON.stringify({productId:e}),method:"POST"};return new y("".concat(p,"redeem"),Object(o.a)(Object(o.a)({},N),t))}(e),(function(e){U({show:!0,type:"success",message:e.message||"Success redeeming!"}),h(m-t)}),(function(e){U({show:!0,type:"error",message:e.message||"Not redeemed!"})}))}};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"sorters-container",children:[Object(u.jsx)(J,{current:Q.to,total:z.length}),Object(u.jsx)(D,{setProducts:w,originProducts:z}),Object(u.jsx)(F,{from:Q.from,to:Q.to,setPage:I,totalLength:z.length})]}),n&&Object(u.jsx)(C,{customClass:"loader-margin"}),Object(u.jsxs)("div",{className:"products-container",children:[v.slice(Q.from,Q.to).map((function(e){var t=e.name,c=void 0===t?L:t,s=e.category,n=void 0===s?L:s,a=e.cost,i=void 0===a?L:a,o=e.img,l=void 0===o?{}:o,j=e._id,b=l.url,d=void 0===b?null:b,h=l.hdUrl,x=void 0===h?null:h,f=m-i>=0;return Object(u.jsxs)("div",{className:"cell",children:[Object(u.jsxs)("div",{className:"card",children:[f?Object(u.jsx)("img",{src:P,alt:"enough points",className:"img-availability"}):Object(u.jsxs)("div",{className:"needed",children:[Object(u.jsxs)("span",{className:"text-needed",children:["You need ",i-m]}),Object(u.jsx)("img",{src:O,alt:"points"})]}),Object(u.jsx)("img",{src:x||d,alt:c,className:"img-product"}),Object(u.jsx)("span",{className:"text category",children:n}),Object(u.jsx)("span",{className:"text",children:c})]},j+c),f&&Object(u.jsxs)("div",{className:"card upon",children:[Object(u.jsx)("img",{src:E,alt:"enough points",className:"img-availability upon-image"}),Object(u.jsxs)("div",{className:"cost-container",children:[Object(u.jsx)("span",{className:"coins-number",children:i}),Object(u.jsx)("img",{src:O,alt:"coin",className:"coin"})]}),Object(u.jsxs)("button",{className:"redeem-button",onClick:R(j,i),disabled:r,children:["Redeem now",r&&Object(u.jsx)(C,{})]})]})]})})),c.isDetected&&Object(u.jsx)("p",{children:c.error})]}),z.length>0&&Object(u.jsxs)("div",{className:"sorters-container",children:[Object(u.jsx)(J,{current:Q.to,total:z.length}),Object(u.jsx)(F,{from:Q.from,to:Q.to,setPage:I,totalLength:z.length})]}),Object(u.jsx)(Y,Object(o.a)(Object(o.a)({},B),{},{okCallback:function(){return U(M)}}))]})};var B=function(){return Object(u.jsx)(G,{})};c(44),c(45);var U=function(e){var t=e.points,c=g(),n=c.error,a=c.loading,i=c.fetchService,r=Object(s.useContext)(j).setAvailableCoins;return Object(u.jsxs)("button",{className:"add-button",onClick:function(){i(function(e){if(isNaN(e))throw Error("Incorrect amount.");var t={body:JSON.stringify({amount:e}),method:"POST"};return new y("".concat(p,"user/points"),Object(o.a)(Object(o.a)({},N),t))}(t),(function(e){var t=Number(e["New Points"]);Number.isNaN(t)||r(t)}))},disabled:a,children:[Object(u.jsx)("b",{className:"point-text",children:t}),Object(u.jsx)("span",{children:"puntos"}),a&&Object(u.jsx)(C,{}),n.isDetected&&Object(u.jsx)("i",{children:"\xa1Asignaci\xf3n fallida!"})]})};var z=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{className:"points-title",children:"Agrega puntos:"}),Object(u.jsxs)("div",{className:"points-container",children:[Object(u.jsx)(U,{points:1e3}),Object(u.jsx)(U,{points:5e3}),Object(u.jsx)(U,{points:7500})]})]})};c(46);var Q=function(){var e,t,c=g(),n=c.success,a=c.error,i=c.loading,r=c.fetchService,l=(null===(e=n.res)||void 0===e||null===(t=e.slice())||void 0===t?void 0:t.reverse())||[];return Object(s.useEffect)((function(){r(new y("".concat(p,"user/history"),Object(o.a)({},N)))}),[]),Object(u.jsxs)("div",{className:"container-history",children:[Object(u.jsx)("h2",{className:"column-title",children:"Product"}),Object(u.jsx)("h2",{className:"column-title",children:"Category"}),Object(u.jsx)("h2",{className:"column-title",children:"Date"}),Object(u.jsx)("h2",{className:"column-title",children:"Cost"}),i&&Object(u.jsx)(C,{customClass:"one-row"}),a.isDetected&&Object(u.jsx)("span",{className:"one-row",children:a.error}),l.map((function(e){var t=e.name,c=void 0===t?"":t,s=e.category,n=void 0===s?"":s,a=e.cost,i=void 0===a?"...":a,r=e.createDate,o=void 0===r?"...":r,l=e.img,j=void 0===l?{url:"",hdUrl:""}:l,b=new Date(o);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:j.url,alt:c,className:"img-name"}),Object(u.jsx)("span",{className:"name",children:c})]}),Object(u.jsx)("span",{children:n}),Object(u.jsx)("span",{className:"date",children:!isNaN(b.getTime())&&b.toLocaleString()}),Object(u.jsxs)("span",{children:["$ ",i]})]})}))]})};var R=function(){return Object(u.jsx)(s.StrictMode,{children:Object(u.jsx)(b,{children:Object(u.jsx)(i.a,{children:Object(u.jsx)(S,{children:Object(u.jsxs)(r.c,{children:[Object(u.jsx)(r.a,{exact:!0,path:"/",children:Object(u.jsx)(B,{})}),Object(u.jsx)(r.a,{exact:!0,path:"/history",children:Object(u.jsx)(Q,{})}),Object(u.jsx)(r.a,{exact:!0,path:"/getPoints",children:Object(u.jsx)(z,{})}),Object(u.jsx)(r.a,{path:"*",children:Object(u.jsx)(B,{})})]})})})})})};a.a.render(Object(u.jsx)(R,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.7b74a835.chunk.js.map